<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Profile</title>
    <link href="index.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Raleway&display=swap" rel="stylesheet">
    <script src="libraries/WebApi.js"></script>
    <script src="scripts.js"></script>
</head>
<body>
<div class="banner">
    <p class="sign-off" onclick="location.href='index.html'">Log Off</p>
</div>
<div id="grid">
    <div class="grid-item">
        <div id="welcome-container">
            <p>Welcome, <span id="student-name">Default</span></p>
            <br><br>
            <div id="profile-photo-container">
                <img src="images/user.svg" id="profile-photo" />
            </div>
        </div>
        <div id="welcome-extension"></div>
        <!--Academic Info-->
        <div id="academic-info-container">
            <div class="info-box">
                <div class="info-head">School</div>
                <div class="info-body" id="school-name"></div>
            </div>
            <div class="info-box">
                <div class="info-head">Degree</div>
                <div class="info-body" id="degree-name"></div>
            </div>
            <div class="info-box">
                <div class="info-head">Year</div>
                <div class="info-body" id="grad-year"></div>
            </div>
        </div>

    </div>
    <div class="grid-item" id="grid-item-2">
        <div class="cardinfo" >
            <div class="container" align="center">
                <div class="info-boxinfo">
                    <div class="info-head">Full Name</div>
                    <div class="info-body"><p id="firstname-text" style="display: inline-block"></p>
                        &nbsp;
                        <p id="lastname-text" style="display: inline-block"></p></div>
                </div>
                <div class="info-boxinfo" >
                    <div class="info-head">Email</div>
                    <div class="info-body" id="User_Email2Text">naokarazu@captechu.edu</div>
                </div>
                <div class="info-boxinfo" >
                    <div class="info-head">Phone Number</div>
                    <div class="info-body" id="User_phoneNText">703-000-00</div>
                </div>
                <div class="info-boxinfo" >
                    <div class="info-head">Occupation</div>
                    <div class="info-body" id="WorkCurrentText">Student</div>
                </div>
            </div>
        </div>

    </div>
    <div class="grid-item" id="grid-item-3">
        <p style="position: relative; top: 25px; color: var(--main-color); font-size: 1.2em;">Courses</p>
        <!--Course Options List-->
        <div style="width: 100%; position: relative; top: 50px; display: flex; justify-content: center; align-items: center;">
            <select id="course-options">
                <option value="CS-230">CS-230 Data Structures</option>
                <option value="CT-376">CT-376 JavaScript</option>
                <option value="CS-305">CS-305 Android Application Development</option>
                <option value="CT-152">CT-152 Introduction to UNIX</option>
            </select>
            <div id="add-course-button" onclick=" AddNewCourse(document.getElementById('course-options').value)">+</div>
        </div>
        <div id="course-container">

        </div>
        <!--<div class="course-tab">Java</div>-->
    </div>
    <div class="grid-item" id="grid-item-4">
        <div class="bubble">Find jobs</div>
        <div class="bubble" onclick="location.href = 'edit_profile.html'">Update</div>
        <div class="bubble">Other</div>
    </div>
</div>
<script>
    window.addEventListener('load', function () {
        //when window Loads Pull Profile Information and see if the user has a profile
        Get_Profile();
        //pull from local storage
        let LoggedInUser = JSON.parse(localStorage.getItem('LoggedInUser'));

        document.getElementById('firstname-text').innerHTML = LoggedInUser.ProfileData.info.firstname;
        document.getElementById('lastname-text').innerHTML = LoggedInUser.ProfileData.info.lastname;
        document.getElementById('User_Email2Text').innerHTML = LoggedInUser.AccountData.username;
        document.getElementById('student-name').innerHTML = LoggedInUser.ProfileData.info.firstname;
        if (!LoggedInUser.ProfileData.info.phonenumber) {
            document.getElementById('User_phoneNText').innerHTML = "Not Specified";
        } else {
            document.getElementById('User_phoneNText').innerHTML = LoggedInUser.ProfileData.info.phonenumber ;
        }
        if (!LoggedInUser.ProfileData.education) {
            document.getElementById('school-name').innerHTML = "Not Specified";
            document.getElementById('degree-name').innerHTML = "Not Specified";
            document.getElementById('grad-year').innerHTML = "Not Specified";
        } else {
            document.getElementById('school-name').innerHTML = LoggedInUser.ProfileData.education.schoolname;
            document.getElementById('degree-name').innerHTML = LoggedInUser.ProfileData.education.degreename;
            document.getElementById('grad-year').innerHTML = LoggedInUser.ProfileData.education.degreeyear;
        }
        if(!LoggedInUser.ProfileData.work){
            document.getElementById('WorkCurrentText').innerHTML = "Not Specified";
        }else{
            document.getElementById('WorkCurrentText').innerHTML = LoggedInUser.ProfileData.work.jobtitle;
        }
        document.getElementById('profile-photo').src = LoggedInUser.ProfileData.personal.pfp;
    });

    function clearFields() {
        var inputItems = document.querySelectorAll(".input-field");
        for (var i = 0; i < inputItems.length; i++) {
            inputItems[i].value = "";
        }
    }

</script>
</body>
</html>
